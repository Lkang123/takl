# 悄悄话 - 端到端加密聊天应用

一个简单的端到端加密聊天室，用于个人研究和学习。

## 特性

- 🔒 端到端加密：AES‑GCM 256 位加密，服务器无法读取消息内容
- 💬 实时通信：基于 WebSocket 的实时消息传输
- 📱 响应式设计：iOS 风格界面，支持桌面和移动设备
- 👥 在线人数：实时显示当前在线用户数
- 📜 历史记录：每个房间仅保留最近 100 条消息（加密存储在内存）
- 🔐 房间口令即房间ID：创建/加入房间即口令；同一口令才能解密
- 🧑‍🤝‍🧑 多房间：每个房间独立历史与在线数
- 🧹 自动清理：空房间 24 小时后自动清理；解散房间有冷却期
- 📶 离线发送队列：断线期间可排队，重连自动发送
- 📦 PWA：可添加到桌面，基础离线可用

## 技术栈

- 后端：Node.js + WebSocket (ws)
- 前端：原生 JavaScript + Web Crypto API
- 加密：AES‑GCM 256‑bit + PBKDF2（salt 与口令绑定）

## 环境变量

- `PORT`：服务器端口（默认 3000）

## 本地运行

```bash
npm install
npm start
```

访问 http://localhost:3000

## 部署

支持部署到任何 Node.js 托管平台（Zeabur、Railway、Render 等）。

## 安全说明

- 消息在浏览器端加密后才发送到服务器
- 服务器只负责转发加密消息，无法解密
- 历史记录以加密形式存储在服务器内存中（仅保留最近 100 条）
- 服务器重启后历史记录会清空

提示：创建房间会生成 8 位小写字母+数字的随机口令，建议私下分享；也可以自定义更长更难的口令以增强安全性。

## License

MIT
